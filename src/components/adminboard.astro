---
import { apiUrl } from "../lib/constants";
---

<section
  x-cloak
  x-transition.opacity
  x-show="rolee !== undefined && rolee === 'admin'"
  :class="{ 'hidden': rolee === 'joueur' || rolee === 'visiteur' || rolee === 'orga' }"
>
  <!-- Conteneur pour aligner les tableaux -->
  <div class="grid gap-8">
    <!-- Section Gestion des Événements -->
    <section>
      <h2 class="text-2xl font-semibold mb-4 ml-4">Événements à valider</h2>
      <div class="bg-[#161215] shadow rounded p-4">
        <table class="min-w-full table-auto">
          <thead>
            <tr class="bg-[#4d2d45] text-left">
              <th class="px-4 py-3 w-1/3">Nom de l'événement</th>
              <th class="px-4 py-3 w-1/4">Statut</th>
              <th class="px-4 py-3 w-1/3">Actions</th>
            </tr>
          </thead>
          <tbody
            id="pendingEvents"
            hx-get={`${apiUrl}/admin/events/pending`}
            hx-trigger="load"
          >
          </tbody>
        </table>
      </div>
    </section>
    <!-- Section Événements validés -->
    <section>
      <h2 class="text-2xl font-semibold mb-4 ml-4">Événements validés</h2>
      <div class="bg-[#161215] shadow rounded p-4">
        <table class="min-w-full table-auto">
          <thead>
            <tr class="bg-[#4d2d45] text-left">
              <th class="px-4 py-3 w-1/3">Nom de l'événement</th>
              <th class="px-4 py-3 w-1/4">Statut</th>
              <th class="px-4 py-3 w-1/3">Actions</th>
            </tr>
          </thead>
          <tbody
            id="approvedEvents"
            hx-get={`${apiUrl}/admin/events/approved`}
            hx-trigger="load"
          >
          </tbody>
        </table>
      </div>
    </section>
    <!-- Section Gestion des Droits Utilisateurs -->
    <section>
      <h2 class="text-2xl font-semibold mb-4 ml-4">
        Gestion des droits utilisateurs
      </h2>
      <div class="bg-[#161215] shadow rounded p-4">
        <table class="min-w-full table-auto">
          <thead>
            <tr class="bg-[#4d2d45] text-left">
              <th class="px-4 py-3 w-1/3">Utilisateur</th>
              <th class="px-4 py-3 w-1/4">Rôle</th>
              <th class="px-4 py-3 w-1/3">Actions</th>
            </tr>
          </thead>
          <tbody
            id="usersTable"
            hx-get={`${apiUrl}/admin/users`}
            hx-trigger="load"
          >
          </tbody>
        </table>
      </div>
    </section>
  </div>
</section>
